<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <meta name="theme-color" content="#16324f" />
  <link rel="manifest" href="./manifest.json" />
  <link rel="apple-touch-icon" href="./icons/icon-192.png" />
  <link rel="stylesheet" href="./styles.css?v=3" />
  <title>차계부</title>
</head>
<body>
  <main class="container">
    <header class="hero">
      <h1>차계부</h1>
      <p>유류비, 통행료, 정비비를 기록하고 월별 합계를 확인하세요.</p>
    </header>

    <section class="card">
      <h2>지출 추가</h2>
      <form id="record-form" class="form-grid">
        <label>
          날짜
          <input type="date" id="date" required />
        </label>
        <label>
          항목
          <select id="category" required>
            <option value="fuel">유류비</option>
            <option value="toll">통행료</option>
            <option value="maintenance">정비</option>
            <option value="parking">주차</option>
            <option value="wash">세차</option>
            <option value="insurance">보험</option>
            <option value="other">기타</option>
          </select>
        </label>
        <label>
          금액(달러)
          <input type="number" id="amount" min="0" step="0.01" required />
        </label>
        <label>
          주유량(갤런, 선택)
          <input type="number" id="fuel-volume" min="0" step="0.01" />
        </label>
        <label>
          갤런당 가격(자동)
          <input type="text" id="price-per-gallon" placeholder="자동 계산" readonly />
        </label>
        <label>
          주행거리(마일, 선택)
          <input type="number" id="mileage" min="0" step="1" />
        </label>
        <label class="full">
          메모(선택)
          <input type="text" id="memo" maxlength="80" placeholder="예: 고속도로 왕복" />
        </label>
        <div class="form-actions full">
          <button type="submit" id="submit-button" class="primary">추가</button>
          <button type="button" id="cancel-edit-button" class="secondary" hidden>수정 취소</button>
        </div>
      </form>
    </section>

    <section class="card">
      <div class="row-between">
        <h2>기록 목록</h2>
        <label class="month-filter">
          월
          <input type="month" id="month-filter" />
        </label>
      </div>
      <div class="storage-tools">
        <button type="button" id="sync-now-button" class="secondary">지금 동기화</button>
        <span id="sync-status"></span>
        <div class="backup-actions">
          <button type="button" id="export-backup-button" class="secondary">백업 내보내기</button>
          <button type="button" id="import-backup-button" class="secondary">백업 불러오기</button>
        </div>
        <input type="file" id="import-backup-file" accept="application/json" hidden />
      </div>

      <div class="stats">
        <div>
          <span>전체 합계</span>
          <strong id="total-amount">$0.00</strong>
        </div>
        <div>
          <span>선택 월 합계</span>
          <strong id="month-amount">$0.00</strong>
        </div>
        <div>
          <span>기록 수</span>
          <strong id="record-count">0</strong>
        </div>
      </div>

      <div class="table-wrap">
        <table class="record-table">
          <colgroup>
            <col class="col-date" />
            <col class="col-category" />
            <col class="col-amount" />
            <col class="col-fuel" />
            <col class="col-price" />
            <col class="col-mileage" />
            <col class="col-memo" />
            <col class="col-edit" />
            <col class="col-delete" />
          </colgroup>
          <thead>
            <tr>
              <th>날짜</th>
              <th>항목</th>
              <th>금액</th>
              <th>주유량</th>
              <th>갤런당 가격</th>
              <th>주행거리</th>
              <th>메모</th>
              <th>수정</th>
              <th>삭제</th>
            </tr>
          </thead>
          <tbody id="record-list"></tbody>
        </table>
      </div>
      <p id="empty-state">아직 기록이 없습니다.</p>
    </section>

    <section class="card">
      <h2>주유 간 주행거리 차이 그래프 (마일)</h2>
      <div class="chart-wrap">
        <canvas id="efficiency-chart" width="920" height="280" aria-label="주유 간 주행거리 차이 그래프"></canvas>
      </div>
      <p id="chart-empty-state">그래프를 보려면 주행거리가 있는 유류비 기록이 2건 이상 필요합니다.</p>
    </section>
  </main>

  <script src="app.js?v=7"></script>
</body>
</html>
